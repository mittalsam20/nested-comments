{"version":3,"file":"index.js","sources":["../src/utils/localAPI.js","../src/utils/helperFunctions.js","../src/commentForm/commentForm.js","../src/comment/comment.js","../src/comments.js"],"sourcesContent":["export const getComments = () => {\n  return [\n    {\n      id: '1',\n      body: 'First comment',\n      userName: 'Sam',\n      userId: '1',\n      parentId: null,\n      createdAt: '2021-08-16T23:00:33.010+02:00'\n    },\n    {\n      id: '2',\n      body: 'Second comment',\n      userName: 'Rahul',\n      userId: '2',\n      parentId: null,\n      createdAt: '2021-08-16T23:00:33.010+02:00'\n    },\n    {\n      id: '3',\n      body: 'First comment first child',\n      userName: 'rohan',\n      userId: '2',\n      parentId: '1',\n      createdAt: '2021-08-16T23:00:33.010+02:00'\n    },\n    {\n      id: '4',\n      body: 'Second comment second child',\n      userName: 'John',\n      userId: '2',\n      parentId: '2',\n      createdAt: '2021-08-16T23:00:33.010+02:00'\n    },\n    {\n      id: '5',\n      body: 'nested Second comment second child',\n      userName: 'John',\n      userId: '2',\n      parentId: '4',\n      createdAt: '2021-09-16T23:00:33.010+02:00'\n    },\n    {\n      id: '6',\n      body: 'sdsdsdsd First comment',\n      userName: 'Sam',\n      userId: '1',\n      parentId: '4',\n      createdAt: '2021-08-16T23:00:33.010+02:00'\n    }\n  ]\n}\n","import { nanoid } from 'nanoid'\nimport { getComments as fetchComments } from './localAPI'\n\nexport const getComments = () => {\n  const comments = fetchComments()\n  return comments\n}\n\nexport const getMilliseconds = ({ timeStamp }) => {\n  return new Date(timeStamp).getTime()\n}\n\nexport const getReplies = ({ comments = [], commentId }) => {\n  return comments\n    .filter(({ parentId }) => parentId === commentId)\n    .sort(\n      (a, b) =>\n        getMilliseconds({ timeStamp: a.createdAt }) -\n        getMilliseconds({ timeStamp: b.createdAt })\n    )\n}\n\nexport const createComment = ({ text, userName, userId, parentId }) => {\n  return {\n    id: nanoid(),\n    body: text,\n    userName,\n    userId,\n    parentId,\n    createdAt: new Date().toISOString()\n  }\n}\n","import React, { useState } from 'react'\nimport styles from '../styles.module.css'\n\nconst CommentForm = (props) => {\n  const {\n    previousComment = '',\n    submitLabel,\n    setActiveComment,\n    handleSubmit\n  } = props\n  const [text, setText] = useState(previousComment)\n  const isTextAreaDisabled = text.length === 0 || text === previousComment\n\n  const onClickCancel = (event) => {\n    event.preventDefault()\n    setActiveComment({ id: null, mode: 'VIEW' })\n    setText('')\n  }\n\n  const onClickSubmit = (event) => {\n    event.preventDefault()\n    handleSubmit({ text })\n    setText('')\n  }\n\n  return (\n    <form onSubmit={onClickSubmit}>\n      <textarea\n        className={styles.commentFormTextarea}\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n      />\n      <button\n        className={`${styles.button} ${styles.buttonSecondary}`}\n        onClick={onClickCancel}\n      >\n        Cancel\n      </button>\n      <button\n        className={`${styles.button} ${styles.buttonPrimary}`}\n        disabled={isTextAreaDisabled}\n      >\n        {submitLabel}\n      </button>\n    </form>\n  )\n}\n\nexport default CommentForm\n","import React, { Fragment } from 'react'\n\nimport CommentForm from '../commentForm'\nimport styles from '../styles.module.css'\nimport { getReplies } from '../utils/helperFunctions'\n\nconst onClickDelete = ({ comments, setComments, commentId }) => {\n  const filteredComments = comments.filter(({ id }) => id !== commentId)\n  setComments(filteredComments)\n}\n\nconst getActionButton = ({\n  mode,\n  userId,\n  comments,\n  createdAt,\n  commentId,\n  setComments,\n  currentUserId,\n  onClickDelete,\n  postedBy = '1',\n  setActiveComment\n}) => {\n  const isUser = currentUserId === userId\n  const isAuthor = postedBy === currentUserId\n  // const fiveMinutes = 300000\n  // const timePassed = new Date() - new Date(createdAt) > fiveMinutes\n\n  const onClickEdit = () => {\n    setActiveComment({ id: commentId, mode: 'EDITING' })\n  }\n\n  return [\n    {\n      id: 'REPLY',\n      label: 'Reply',\n      show: Boolean(currentUserId),\n      disabled: mode !== 'VIEW',\n      onClick: () => setActiveComment({ id: commentId, mode: 'REPLYING' })\n    },\n    {\n      id: 'EDIT',\n      label: 'Edit',\n      show: isUser,\n      disabled: mode !== 'VIEW',\n      onClick: onClickEdit\n    },\n    {\n      id: 'DELETE',\n      label: 'Delete',\n      show: isUser || isAuthor,\n      disabled: mode !== 'VIEW',\n      onClick: () => onClickDelete({ comments, setComments, commentId })\n    }\n  ]\n}\n\nconst Comment = (props) => {\n  const {\n    comment,\n    replies,\n    comments,\n    setComments,\n    handleSubmit,\n    activeComment,\n    setActiveComment,\n    currentUserId = 1\n  } = props\n\n  const { id: activeCommentId, mode } = activeComment\n  const { id, body, userName, userId, parentId, createdAt } = comment\n\n  const submitLabel = mode === 'EDITING' ? 'Save' : 'Comment'\n  const formattedDate = new Date(createdAt).toLocaleDateString()\n  const actionButtons = getActionButton({\n    mode,\n    userId,\n    parentId,\n    currentUserId,\n    createdAt,\n    commentId: id,\n    comments,\n    setComments,\n    onClickDelete,\n    setActiveComment\n  })\n\n  return (\n    <div\n      className={styles.comment}\n      style={\n        parentId !== null && replies.length > 0 ? { marginBottom: '0' } : {}\n      }\n    >\n      <div className={styles.commentImageContainer}>\n        <img src='/user-icon.png' alt='us' />\n      </div>\n      <div className={styles.commentRightPart}>\n        {activeCommentId === id && mode === 'EDITING' ? (\n          <CommentForm\n            previousComment={body}\n            submitLabel={submitLabel}\n            setActiveComment={setActiveComment}\n            handleSubmit={({ text }) => handleSubmit({ text, mode, comment })}\n          />\n        ) : (\n          <>\n            <div className={styles.commentContent}>\n              <div className={styles.commentAuthor}>{userName}</div>\n              <>{formattedDate}</>\n            </div>\n            <div className={styles.commentText}>{body}</div>\n            <div className={styles.commentActions}>\n              {actionButtons.map(({ id, label, show, onClick }) => {\n                return (\n                  show && (\n                    <div\n                      key={id}\n                      onClick={onClick}\n                      className={styles.commentAction}\n                    >\n                      {label}\n                    </div>\n                  )\n                )\n              })}\n            </div>\n          </>\n        )}\n\n        {activeCommentId === id && mode === 'REPLYING' && (\n          <div className={styles.replyTextAreaContainer}>\n            <div className={styles.commentImageContainer}>\n              <img src='/user-icon.png' alt='ava' />\n            </div>\n            <CommentForm\n              submitLabel={submitLabel}\n              setActiveComment={setActiveComment}\n              handleSubmit={({ text }) => handleSubmit({ text, mode, comment })}\n            />\n          </div>\n        )}\n\n        {replies.length > 0 && (\n          <div className={styles.replies}>\n            {replies.map((reply) => {\n              const { id } = reply\n              const nestedReplies = getReplies({ comments, commentId: id })\n              return (\n                <Comment\n                  key={id}\n                  comment={reply}\n                  replies={nestedReplies}\n                  comments={comments}\n                  setComments={setComments}\n                  handleSubmit={handleSubmit}\n                  currentUserId={currentUserId}\n                  activeComment={activeComment}\n                  setActiveComment={setActiveComment}\n                />\n              )\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default Comment\n","import React, { useState, useEffect } from 'react'\n\nimport {\n  getReplies,\n  getComments,\n  createComment\n} from './utils/helperFunctions.js'\n\nimport Comment from './comment'\nimport CommentForm from './commentForm'\nimport styles from './styles.module.css'\n\nconst newCommentInitialState = { id: 'NEW_COMMENT', parentId: null }\n\nconst addComment = ({\n  text,\n  mode,\n  comment = {},\n  comments,\n  setComments,\n  currentUserId = null,\n  currentUserName = null\n}) => {\n  let updatedComments\n  const { id, userName, parentId } = comment\n  console.log(comment, text)\n  if (mode === 'COMMENTING' || mode === 'REPLYING') {\n    const newComment = createComment({\n      text,\n      userId: currentUserId,\n      userName: currentUserName || userName,\n      parentId: mode === 'COMMENTING' && parentId == null ? null : id\n    })\n    updatedComments = [newComment, ...comments]\n  } else if (mode === 'EDITING') {\n    updatedComments = comments.map((comment) => {\n      if (comment.id === id) return { ...comment, body: text }\n      return comment\n    })\n  }\n\n  setComments(updatedComments)\n}\n\nconst Comments = (props) => {\n  const { currentUserId = 1, currentUserName = 'Sam' } = props\n  const [comments, setComments] = useState([])\n  const [activeComment, setActiveComment] = useState({\n    id: null,\n    mode: 'VIEW'\n  })\n  const rootComments = comments.filter(({ parentId }) => parentId === null)\n\n  useEffect(() => {\n    setComments(getComments())\n  }, [])\n\n  const handleSubmit = ({ text, mode, comment = null }) => {\n    addComment({\n      text,\n      mode,\n      comment,\n      comments,\n      currentUserId,\n      currentUserName,\n      setComments\n    })\n    setActiveComment({ id: null, mode: 'VIEW' })\n  }\n\n  return (\n    <div className={styles.comments}>\n      <h3 className={styles.commentsTitle}>comments</h3>\n      <div className={styles.commentFormTitle}>Write Comment</div>\n      <CommentForm\n        submitLabel='comment'\n        setActiveComment={setActiveComment}\n        handleSubmit={({ text }) =>\n          handleSubmit({\n            text,\n            mode: 'COMMENTING',\n            comment: newCommentInitialState\n          })\n        }\n      />\n      <div className={styles.commentsContainer}>\n        {rootComments.map((comment) => {\n          const { id } = comment\n          const replies = getReplies({ comments, commentId: id })\n          return (\n            <Comment\n              key={id}\n              comment={comment}\n              replies={replies}\n              comments={comments}\n              setComments={setComments}\n              handleSubmit={handleSubmit}\n              currentUserId={currentUserId}\n              activeComment={activeComment}\n              setActiveComment={setActiveComment}\n            />\n          ) // TODO: add lazy loading for thousands of replies\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default Comments\n"],"names":["getComments","id","body","userName","userId","parentId","createdAt","comments","fetchComments","getMilliseconds","_ref","timeStamp","Date","getTime","getReplies","_ref2","_ref2$comments","commentId","filter","_ref3","sort","a","b","createComment","_ref4","text","nanoid","toISOString","CommentForm","props","_props$previousCommen","previousComment","submitLabel","setActiveComment","handleSubmit","_useState","useState","setText","isTextAreaDisabled","length","onClickCancel","event","preventDefault","mode","onClickSubmit","React","createElement","onSubmit","className","styles","commentFormTextarea","value","onChange","e","target","button","buttonSecondary","onClick","buttonPrimary","disabled","onClickDelete","setComments","filteredComments","getActionButton","currentUserId","_ref3$postedBy","postedBy","isUser","isAuthor","onClickEdit","label","show","Boolean","Comment","comment","replies","activeComment","_props$currentUserId","activeCommentId","formattedDate","toLocaleDateString","actionButtons","style","marginBottom","commentImageContainer","src","alt","commentRightPart","Fragment","commentContent","commentAuthor","commentText","commentActions","map","_ref5","key","commentAction","replyTextAreaContainer","_ref6","reply","nestedReplies","newCommentInitialState","addComment","_ref$comment","_ref$currentUserId","_ref$currentUserName","currentUserName","updatedComments","console","log","newComment","concat","_extends","Comments","_props$currentUserNam","_useState2","rootComments","useEffect","_ref3$comment","commentsTitle","commentFormTitle","commentsContainer"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAO,IAAMA,WAAW,GAAG,SAAdA,WAAWA,GAAS;EAC/B,OAAO,CACL;IACEC,EAAE,EAAE,GAAG;IACPC,IAAI,EAAE,eAAe;IACrBC,QAAQ,EAAE,KAAK;IACfC,MAAM,EAAE,GAAG;IACXC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE;GACZ,EACD;IACEL,EAAE,EAAE,GAAG;IACPC,IAAI,EAAE,gBAAgB;IACtBC,QAAQ,EAAE,OAAO;IACjBC,MAAM,EAAE,GAAG;IACXC,QAAQ,EAAE,IAAI;IACdC,SAAS,EAAE;GACZ,EACD;IACEL,EAAE,EAAE,GAAG;IACPC,IAAI,EAAE,2BAA2B;IACjCC,QAAQ,EAAE,OAAO;IACjBC,MAAM,EAAE,GAAG;IACXC,QAAQ,EAAE,GAAG;IACbC,SAAS,EAAE;GACZ,EACD;IACEL,EAAE,EAAE,GAAG;IACPC,IAAI,EAAE,6BAA6B;IACnCC,QAAQ,EAAE,MAAM;IAChBC,MAAM,EAAE,GAAG;IACXC,QAAQ,EAAE,GAAG;IACbC,SAAS,EAAE;GACZ,EACD;IACEL,EAAE,EAAE,GAAG;IACPC,IAAI,EAAE,oCAAoC;IAC1CC,QAAQ,EAAE,MAAM;IAChBC,MAAM,EAAE,GAAG;IACXC,QAAQ,EAAE,GAAG;IACbC,SAAS,EAAE;GACZ,EACD;IACEL,EAAE,EAAE,GAAG;IACPC,IAAI,EAAE,wBAAwB;IAC9BC,QAAQ,EAAE,KAAK;IACfC,MAAM,EAAE,GAAG;IACXC,QAAQ,EAAE,GAAG;IACbC,SAAS,EAAE;GACZ,CACF;AACH,CAAC;;AChDM,IAAMN,aAAW,GAAG,SAAdA,aAAWA,GAAS;EAC/B,IAAMO,QAAQ,GAAGC,WAAa,EAAE;EAChC,OAAOD,QAAQ;AACjB,CAAC;AAED,AAAO,IAAME,eAAe,GAAG,SAAlBA,eAAeA,CAAAC,IAAA,EAAsB;EAAA,IAAhBC,SAAS,GAAAD,IAAA,CAATC,SAAS;EACzC,OAAO,IAAIC,IAAI,CAACD,SAAS,CAAC,CAACE,OAAO,EAAE;AACtC,CAAC;AAED,AAAO,IAAMC,UAAU,GAAG,SAAbA,UAAUA,CAAAC,KAAA,EAAqC;EAAA,IAAAC,cAAA,GAAAD,KAAA,CAA/BR,QAAQ;IAARA,QAAQ,GAAAS,cAAA,cAAG,EAAE,GAAAA,cAAA;IAAEC,SAAS,GAAAF,KAAA,CAATE,SAAS;EACnD,OAAOV,QAAQ,CACZW,MAAM,CAAC,UAAAC,KAAA;IAAA,IAAGd,QAAQ,GAAAc,KAAA,CAARd,QAAQ;IAAA,OAAOA,QAAQ,KAAKY,SAAS;IAAC,CAChDG,IAAI,CACH,UAACC,CAAC,EAAEC,CAAC;IAAA,OACHb,eAAe,CAAC;MAAEE,SAAS,EAAEU,CAAC,CAACf;KAAW,CAAC,GAC3CG,eAAe,CAAC;MAAEE,SAAS,EAAEW,CAAC,CAAChB;KAAW,CAAC;IAC9C;AACL,CAAC;AAED,AAAO,IAAMiB,aAAa,GAAG,SAAhBA,aAAaA,CAAAC,KAAA,EAA6C;EAAA,IAAvCC,IAAI,GAAAD,KAAA,CAAJC,IAAI;IAAEtB,QAAQ,GAAAqB,KAAA,CAARrB,QAAQ;IAAEC,MAAM,GAAAoB,KAAA,CAANpB,MAAM;IAAEC,QAAQ,GAAAmB,KAAA,CAARnB,QAAQ;EAC9D,OAAO;IACLJ,EAAE,EAAEyB,aAAM,EAAE;IACZxB,IAAI,EAAEuB,IAAI;IACVtB,QAAQ,EAARA,QAAQ;IACRC,MAAM,EAANA,MAAM;IACNC,QAAQ,EAARA,QAAQ;IACRC,SAAS,EAAE,IAAIM,IAAI,EAAE,CAACe,WAAW;GAClC;AACH,CAAC;;;;AC5BD,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,KAAK,EAAK;EAC7B,IAAAC,qBAAA,GAKID,KAAK,CAJPE,eAAe;IAAfA,eAAe,GAAAD,qBAAA,cAAG,EAAE,GAAAA,qBAAA;IACpBE,WAAW,GAGTH,KAAK,CAHPG,WAAW;IACXC,gBAAgB,GAEdJ,KAAK,CAFPI,gBAAgB;IAChBC,YAAY,GACVL,KAAK,CADPK,YAAY;EAEd,IAAAC,SAAA,GAAwBC,cAAQ,CAACL,eAAe,CAAC;IAA1CN,IAAI,GAAAU,SAAA;IAAEE,OAAO,GAAAF,SAAA;EACpB,IAAMG,kBAAkB,GAAGb,IAAI,CAACc,MAAM,KAAK,CAAC,IAAId,IAAI,KAAKM,eAAe;EAExE,IAAMS,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,KAAK,EAAK;IAC/BA,KAAK,CAACC,cAAc,EAAE;IACtBT,gBAAgB,CAAC;MAAEhC,EAAE,EAAE,IAAI;MAAE0C,IAAI,EAAE;KAAQ,CAAC;IAC5CN,OAAO,CAAC,EAAE,CAAC;GACZ;EAED,IAAMO,aAAa,GAAG,SAAhBA,aAAaA,CAAIH,KAAK,EAAK;IAC/BA,KAAK,CAACC,cAAc,EAAE;IACtBR,YAAY,CAAC;MAAET,IAAI,EAAJA;KAAM,CAAC;IACtBY,OAAO,CAAC,EAAE,CAAC;GACZ;EAED,oBACEQ,cAAA,CAAAC,aAAA;IAAMC,QAAQ,EAAEH;kBACdC,cAAA,CAAAC,aAAA;IACEE,SAAS,EAAEC,MAAM,CAACC,mBAAoB;IACtCC,KAAK,EAAE1B,IAAK;IACZ2B,QAAQ,EAAE,SAAAA,SAACC,CAAC;MAAA,OAAKhB,OAAO,CAACgB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAC;;IACxC,eACFN,cAAA,CAAAC,aAAA;IACEE,SAAS,EAAKC,MAAM,CAACM,MAAM,SAAIN,MAAM,CAACO,eAAkB;IACxDC,OAAO,EAAEjB;KACV,QAED,CAAS,eACTK,cAAA,CAAAC,aAAA;IACEE,SAAS,EAAKC,MAAM,CAACM,MAAM,SAAIN,MAAM,CAACS,aAAgB;IACtDC,QAAQ,EAAErB;KAETN,WAAW,CACL,CACJ;AAEX,CAAC;;ACxCD,IAAM4B,aAAa,GAAG,SAAhBA,aAAaA,CAAAlD,IAAA,EAA6C;EAAA,IAAvCH,QAAQ,GAAAG,IAAA,CAARH,QAAQ;IAAEsD,WAAW,GAAAnD,IAAA,CAAXmD,WAAW;IAAE5C,SAAS,GAAAP,IAAA,CAATO,SAAS;EACvD,IAAM6C,gBAAgB,GAAGvD,QAAQ,CAACW,MAAM,CAAC,UAAAH,KAAA;IAAA,IAAGd,EAAE,GAAAc,KAAA,CAAFd,EAAE;IAAA,OAAOA,EAAE,KAAKgB,SAAS;IAAC;EACtE4C,WAAW,CAACC,gBAAgB,CAAC;AAC/B,CAAC;AAED,IAAMC,eAAe,GAAG,SAAlBA,eAAeA,CAAA5C,KAAA,EAWf;EAAA,IAVJwB,IAAI,GAAAxB,KAAA,CAAJwB,IAAI;IACJvC,MAAM,GAAAe,KAAA,CAANf,MAAM;IACNG,QAAQ,GAAAY,KAAA,CAARZ,QAAQ;IACRD,AACAW,SAAS,GAAAE,KAAA,CAATF,SAAS;IACT4C,WAAW,GAAA1C,KAAA,CAAX0C,WAAW;IACXG,aAAa,GAAA7C,KAAA,CAAb6C,aAAa;IACbJ,aAAa,GAAAzC,KAAA,CAAbyC,aAAa;IAAAK,cAAA,GAAA9C,KAAA,CACb+C,QAAQ;IAARA,QAAQ,GAAAD,cAAA,cAAG,GAAG,GAAAA,cAAA;IACdhC,gBAAgB,GAAAd,KAAA,CAAhBc,gBAAgB;EAEhB,IAAMkC,MAAM,GAAGH,aAAa,KAAK5D,MAAM;EACvC,IAAMgE,QAAQ,GAAGF,QAAQ,KAAKF,aAAa;EAI3C,IAAMK,WAAW,GAAG,SAAdA,WAAWA,GAAS;IACxBpC,gBAAgB,CAAC;MAAEhC,EAAE,EAAEgB,SAAS;MAAE0B,IAAI,EAAE;KAAW,CAAC;GACrD;EAED,OAAO,CACL;IACE1C,EAAE,EAAE,OAAO;IACXqE,KAAK,EAAE,OAAO;IACdC,IAAI,EAAEC,OAAO,CAACR,aAAa,CAAC;IAC5BL,QAAQ,EAAEhB,IAAI,KAAK,MAAM;IACzBc,OAAO,EAAE,SAAAA;MAAA,OAAMxB,gBAAgB,CAAC;QAAEhC,EAAE,EAAEgB,SAAS;QAAE0B,IAAI,EAAE;OAAY,CAAC;;GACrE,EACD;IACE1C,EAAE,EAAE,MAAM;IACVqE,KAAK,EAAE,MAAM;IACbC,IAAI,EAAEJ,MAAM;IACZR,QAAQ,EAAEhB,IAAI,KAAK,MAAM;IACzBc,OAAO,EAAEY;GACV,EACD;IACEpE,EAAE,EAAE,QAAQ;IACZqE,KAAK,EAAE,QAAQ;IACfC,IAAI,EAAEJ,MAAM,IAAIC,QAAQ;IACxBT,QAAQ,EAAEhB,IAAI,KAAK,MAAM;IACzBc,OAAO,EAAE,SAAAA;MAAA,OAAMG,aAAa,CAAC;QAAErD,QAAQ,EAARA,QAAQ;QAAEsD,WAAW,EAAXA,WAAW;QAAE5C,SAAS,EAATA;OAAW,CAAC;;GACnE,CACF;AACH,CAAC;AAED,IAAMwD,OAAO,GAAG,SAAVA,OAAOA,CAAI5C,KAAK,EAAK;EACzB,IACE6C,OAAO,GAQL7C,KAAK,CARP6C,OAAO;IACPC,OAAO,GAOL9C,KAAK,CAPP8C,OAAO;IACPpE,QAAQ,GAMNsB,KAAK,CANPtB,QAAQ;IACRsD,WAAW,GAKThC,KAAK,CALPgC,WAAW;IACX3B,aAAY,GAIVL,KAAK,CAJPK,YAAY;IACZ0C,aAAa,GAGX/C,KAAK,CAHP+C,aAAa;IACb3C,gBAAgB,GAEdJ,KAAK,CAFPI,gBAAgB;IAAA4C,oBAAA,GAEdhD,KAAK,CADPmC,aAAa;IAAbA,aAAa,GAAAa,oBAAA,cAAG,CAAC,GAAAA,oBAAA;EAGnB,IAAYC,eAAe,GAAWF,aAAa,CAA3C3E,EAAE;IAAmB0C,IAAI,GAAKiC,aAAa,CAAtBjC,IAAI;EACjC,IAAQ1C,EAAE,GAAkDyE,OAAO,CAA3DzE,EAAE;IAAEC,IAAI,GAA4CwE,OAAO,CAAvDxE,IAAI;IAAEC,QAAQ,GAAkCuE,OAAO,CAAjDvE,QAAQ;IAAEC,MAAM,GAA0BsE,OAAO,CAAvCtE,MAAM;IAAEC,QAAQ,GAAgBqE,OAAO,CAA/BrE,QAAQ;IAAEC,SAAS,GAAKoE,OAAO,CAArBpE,SAAS;EAEvD,IAAM0B,WAAW,GAAGW,IAAI,KAAK,SAAS,GAAG,MAAM,GAAG,SAAS;EAC3D,IAAMoC,aAAa,GAAG,IAAInE,IAAI,CAACN,SAAS,CAAC,CAAC0E,kBAAkB,EAAE;EAC9D,IAAMC,aAAa,GAAGlB,eAAe,CAAC;IACpCpB,IAAI,EAAJA,IAAI;IACJvC,MAAM,EAANA,MAAM;IACNC,QAAQ,EAARA,QAAQ;IACR2D,aAAa,EAAbA,aAAa;IACb1D,SAAS,EAATA,SAAS;IACTW,SAAS,EAAEhB,EAAE;IACbM,QAAQ,EAARA,QAAQ;IACRsD,WAAW,EAAXA,WAAW;IACXD,aAAa,EAAbA,aAAa;IACb3B,gBAAgB,EAAhBA;GACD,CAAC;EAEF,oBACEY,cAAA,CAAAC,aAAA;IACEE,SAAS,EAAEC,MAAM,CAACyB,OAAQ;IAC1BQ,KAAK,EACH7E,QAAQ,KAAK,IAAI,IAAIsE,OAAO,CAACpC,MAAM,GAAG,CAAC,GAAG;MAAE4C,YAAY,EAAE;KAAK,GAAG;kBAGpEtC,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAACmC;kBACrBvC,cAAA,CAAAC,aAAA;IAAKuC,GAAG,EAAC,gBAAgB;IAACC,GAAG,EAAC;IAAO,CACjC,eACNzC,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAACsC;KACpBT,eAAe,KAAK7E,EAAE,IAAI0C,IAAI,KAAK,SAAS,gBAC3CE,cAAA,CAAAC,aAAA,CAAClB,WAAW;IACVG,eAAe,EAAE7B,IAAK;IACtB8B,WAAW,EAAEA,WAAY;IACzBC,gBAAgB,EAAEA,gBAAiB;IACnCC,YAAY,EAAE,SAAAA,aAAAV,KAAA;MAAA,IAAGC,IAAI,GAAAD,KAAA,CAAJC,IAAI;MAAA,OAAOS,aAAY,CAAC;QAAET,IAAI,EAAJA,IAAI;QAAEkB,IAAI,EAAJA,IAAI;QAAE+B,OAAO,EAAPA;OAAS,CAAC;;IACjE,gBAEF7B,cAAA,CAAAC,aAAA,CAAA0C,cAAA,qBACE3C,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAACwC;kBACrB5C,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAACyC;KAAgBvF,QAAQ,CAAO,eACtD0C,cAAA,CAAAC,aAAA,CAAA0C,cAAA,QAAGT,aAAa,CAAI,CAChB,eACNlC,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAAC0C;KAAczF,IAAI,CAAO,eAChD2C,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAAC2C;KACpBX,aAAa,CAACY,GAAG,CAAC,UAAAC,KAAA,EAAkC;IAAA,IAA/B7F,EAAE,GAAA6F,KAAA,CAAF7F,EAAE;MAAEqE,KAAK,GAAAwB,KAAA,CAALxB,KAAK;MAAEC,IAAI,GAAAuB,KAAA,CAAJvB,IAAI;MAAEd,OAAO,GAAAqC,KAAA,CAAPrC,OAAO;IAC5C,OACEc,IAAI,iBACF1B,cAAA,CAAAC,aAAA;MACEiD,GAAG,EAAE9F,EAAG;MACRwD,OAAO,EAAEA,OAAQ;MACjBT,SAAS,EAAEC,MAAM,CAAC+C;OAEjB1B,KAAK,CAET;GAEJ,CAAC,CACE,CAET,EAEAQ,eAAe,KAAK7E,EAAE,IAAI0C,IAAI,KAAK,UAAU,iBAC5CE,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAACgD;kBACrBpD,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAACmC;kBACrBvC,cAAA,CAAAC,aAAA;IAAKuC,GAAG,EAAC,gBAAgB;IAACC,GAAG,EAAC;IAAQ,CAClC,eACNzC,cAAA,CAAAC,aAAA,CAAClB,WAAW;IACVI,WAAW,EAAEA,WAAY;IACzBC,gBAAgB,EAAEA,gBAAiB;IACnCC,YAAY,EAAE,SAAAA,aAAAgE,KAAA;MAAA,IAAGzE,IAAI,GAAAyE,KAAA,CAAJzE,IAAI;MAAA,OAAOS,aAAY,CAAC;QAAET,IAAI,EAAJA,IAAI;QAAEkB,IAAI,EAAJA,IAAI;QAAE+B,OAAO,EAAPA;OAAS,CAAC;;IACjE,CAEL,EAEAC,OAAO,CAACpC,MAAM,GAAG,CAAC,iBACjBM,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAAC0B;KACpBA,OAAO,CAACkB,GAAG,CAAC,UAACM,KAAK,EAAK;IACtB,IAAQlG,EAAE,GAAKkG,KAAK,CAAZlG,EAAE;IACV,IAAMmG,aAAa,GAAGtF,UAAU,CAAC;MAAEP,QAAQ,EAARA,QAAQ;MAAEU,SAAS,EAAEhB;KAAI,CAAC;IAC7D,oBACE4C,cAAA,CAAAC,aAAA,CAAC2B,OAAO;MACNsB,GAAG,EAAE9F,EAAG;MACRyE,OAAO,EAAEyB,KAAM;MACfxB,OAAO,EAAEyB,aAAc;MACvB7F,QAAQ,EAAEA,QAAS;MACnBsD,WAAW,EAAEA,WAAY;MACzB3B,YAAY,EAAEA,aAAa;MAC3B8B,aAAa,EAAEA,aAAc;MAC7BY,aAAa,EAAEA,aAAc;MAC7B3C,gBAAgB,EAAEA;MAClB;GAEL,CAAC,CAEL,CACG,CACF;AAEV,CAAC;;AC3JD,IAAMoE,sBAAsB,GAAG;EAAEpG,EAAE,EAAE,aAAa;EAAEI,QAAQ,EAAE;AAAK,CAAC;AAEpE,IAAMiG,UAAU,GAAG,SAAbA,UAAUA,CAAA5F,IAAA,EAQV;EAAA,IAPJe,IAAI,GAAAf,IAAA,CAAJe,IAAI;IACJkB,IAAI,GAAAjC,IAAA,CAAJiC,IAAI;IAAA4D,YAAA,GAAA7F,IAAA,CACJgE,OAAO;IAAPA,OAAO,GAAA6B,YAAA,cAAG,EAAE,GAAAA,YAAA;IACZhG,QAAQ,GAAAG,IAAA,CAARH,QAAQ;IACRsD,WAAW,GAAAnD,IAAA,CAAXmD,WAAW;IAAA2C,kBAAA,GAAA9F,IAAA,CACXsD,aAAa;IAAbA,aAAa,GAAAwC,kBAAA,cAAG,IAAI,GAAAA,kBAAA;IAAAC,oBAAA,GAAA/F,IAAA,CACpBgG,eAAe;IAAfA,eAAe,GAAAD,oBAAA,cAAG,IAAI,GAAAA,oBAAA;EAEtB,IAAIE,eAAe;EACnB,IAAQ1G,EAAE,GAAyByE,OAAO,CAAlCzE,EAAE;IAAEE,QAAQ,GAAeuE,OAAO,CAA9BvE,QAAQ;IAAEE,QAAQ,GAAKqE,OAAO,CAApBrE,QAAQ;EAC9BuG,OAAO,CAACC,GAAG,CAACnC,OAAO,EAAEjD,IAAI,CAAC;EAC1B,IAAIkB,IAAI,KAAK,YAAY,IAAIA,IAAI,KAAK,UAAU,EAAE;IAChD,IAAMmE,UAAU,GAAGvF,aAAa,CAAC;MAC/BE,IAAI,EAAJA,IAAI;MACJrB,MAAM,EAAE4D,aAAa;MACrB7D,QAAQ,EAAEuG,eAAe,IAAIvG,QAAQ;MACrCE,QAAQ,EAAEsC,IAAI,KAAK,YAAY,IAAItC,QAAQ,IAAI,IAAI,GAAG,IAAI,GAAGJ;KAC9D,CAAC;IACF0G,eAAe,IAAIG,UAAU,EAAAC,MAAA,CAAKxG,QAAQ,CAAC;GAC5C,MAAM,IAAIoC,IAAI,KAAK,SAAS,EAAE;IAC7BgE,eAAe,GAAGpG,QAAQ,CAACsF,GAAG,CAAC,UAACnB,OAAO,EAAK;MAC1C,IAAIA,OAAO,CAACzE,EAAE,KAAKA,EAAE,EAAE,OAAA+G,QAAA,KAAYtC,OAAO;QAAExE,IAAI,EAAEuB;;MAClD,OAAOiD,OAAO;KACf,CAAC;;EAGJb,WAAW,CAAC8C,eAAe,CAAC;AAC9B,CAAC;AAED,IAAMM,QAAQ,GAAG,SAAXA,QAAQA,CAAIpF,KAAK,EAAK;EAC1B,IAAAgD,oBAAA,GAAuDhD,KAAK,CAApDmC,aAAa;IAAbA,aAAa,GAAAa,oBAAA,cAAG,CAAC,GAAAA,oBAAA;IAAAqC,qBAAA,GAA8BrF,KAAK,CAAjC6E,eAAe;IAAfA,eAAe,GAAAQ,qBAAA,cAAG,KAAK,GAAAA,qBAAA;EAClD,IAAA/E,SAAA,GAAgCC,cAAQ,CAAC,EAAE,CAAC;IAArC7B,QAAQ,GAAA4B,SAAA;IAAE0B,WAAW,GAAA1B,SAAA;EAC5B,IAAAgF,UAAA,GAA0C/E,cAAQ,CAAC;MACjDnC,EAAE,EAAE,IAAI;MACR0C,IAAI,EAAE;KACP,CAAC;IAHKiC,aAAa,GAAAuC,UAAA;IAAElF,gBAAgB,GAAAkF,UAAA;EAItC,IAAMC,YAAY,GAAG7G,QAAQ,CAACW,MAAM,CAAC,UAAAH,KAAA;IAAA,IAAGV,QAAQ,GAAAU,KAAA,CAARV,QAAQ;IAAA,OAAOA,QAAQ,KAAK,IAAI;IAAC;EAEzEgH,eAAS,CAAC,YAAM;IACdxD,WAAW,CAAC7D,aAAW,EAAE,CAAC;GAC3B,EAAE,EAAE,CAAC;EAEN,IAAMkC,aAAY,GAAG,SAAfA,YAAYA,CAAAf,KAAA,EAAuC;IAAA,IAAjCM,IAAI,GAAAN,KAAA,CAAJM,IAAI;MAAEkB,IAAI,GAAAxB,KAAA,CAAJwB,IAAI;MAAA2E,aAAA,GAAAnG,KAAA,CAAEuD,OAAO;MAAPA,OAAO,GAAA4C,aAAA,cAAG,IAAI,GAAAA,aAAA;IAChDhB,UAAU,CAAC;MACT7E,IAAI,EAAJA,IAAI;MACJkB,IAAI,EAAJA,IAAI;MACJ+B,OAAO,EAAPA,OAAO;MACPnE,QAAQ,EAARA,QAAQ;MACRyD,aAAa,EAAbA,aAAa;MACb0C,eAAe,EAAfA,eAAe;MACf7C,WAAW,EAAXA;KACD,CAAC;IACF5B,gBAAgB,CAAC;MAAEhC,EAAE,EAAE,IAAI;MAAE0C,IAAI,EAAE;KAAQ,CAAC;GAC7C;EAED,oBACEE,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAAC1C;kBACrBsC,cAAA,CAAAC,aAAA;IAAIE,SAAS,EAAEC,MAAM,CAACsE;KAAe,UAAQ,CAAK,eAClD1E,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAACuE;KAAkB,eAAa,CAAM,eAC5D3E,cAAA,CAAAC,aAAA,CAAClB,WAAW;IACVI,WAAW,EAAC,SAAS;IACrBC,gBAAgB,EAAEA,gBAAiB;IACnCC,YAAY,EAAE,SAAAA,aAAAV,KAAA;MAAA,IAAGC,IAAI,GAAAD,KAAA,CAAJC,IAAI;MAAA,OACnBS,aAAY,CAAC;QACXT,IAAI,EAAJA,IAAI;QACJkB,IAAI,EAAE,YAAY;QAClB+B,OAAO,EAAE2B;OACV,CAAC;;IAEJ,eACFxD,cAAA,CAAAC,aAAA;IAAKE,SAAS,EAAEC,MAAM,CAACwE;KACpBL,YAAY,CAACvB,GAAG,CAAC,UAACnB,OAAO,EAAK;IAC7B,IAAQzE,EAAE,GAAKyE,OAAO,CAAdzE,EAAE;IACV,IAAM0E,OAAO,GAAG7D,UAAU,CAAC;MAAEP,QAAQ,EAARA,QAAQ;MAAEU,SAAS,EAAEhB;KAAI,CAAC;IACvD,oBACE4C,cAAA,CAAAC,aAAA,CAAC2B,OAAO;MACNsB,GAAG,EAAE9F,EAAG;MACRyE,OAAO,EAAEA,OAAQ;MACjBC,OAAO,EAAEA,OAAQ;MACjBpE,QAAQ,EAAEA,QAAS;MACnBsD,WAAW,EAAEA,WAAY;MACzB3B,YAAY,EAAEA,aAAa;MAC3B8B,aAAa,EAAEA,aAAc;MAC7BY,aAAa,EAAEA,aAAc;MAC7B3C,gBAAgB,EAAEA;MAClB;GAEL,CAAC,CACE,CACF;AAEV,CAAC;;;;"}